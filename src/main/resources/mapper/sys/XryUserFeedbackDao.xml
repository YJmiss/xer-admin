<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.oservice.admin.modules.sys.dao.XryUserFeedbackDao">

    <!--查询返回的数据总数-->
    <select id="countTotal" parameterType="java.util.Map" resultType="java.lang.Long">
        select count(*) from xry_user_feedback xuf left join xry_user xu on xuf.user_id = xu.id where 1=1
        <if test="params.userInfo != null and params.userInfo != ''">
            and xu.nickname like #{params.userInfo} or xu.phone like #{params.userInfo}
        </if>
        <if test="params.createTime != null and params.createTime != ''">
            and xuf.create_time like #{params.createTime}
        </if>
        <if test="params.checkStatus != null and params.checkStatus != ''">
            and xuf.check_status = #{params.checkStatus}
        </if>
    </select>
    <!--自定义分页查询-->
    <select id="pageList" parameterType="java.util.Map" resultType="java.util.Map">
        select xuf.*,xu.id as userId,xu.nickname, xu.phone
        from xry_user_feedback xuf left join xry_user xu on xuf.user_id = xu.id where 1=1
        <if test="params.userInfo != null and params.userInfo != ''">
            and xu.nickname like #{params.userInfo} or xu.phone like #{params.userInfo}
        </if>
        <if test="params.createTime != null and params.createTime != ''">
            and xuf.create_time like #{params.createTime}
        </if>
        <if test="params.checkStatus != null and params.checkStatus != ''">
            and xuf.check_status = #{params.checkStatus}
        </if>
        <if test="params.pageSize != null and params.pageSize != ''">
            limit ${params.pageNo},${params.pageSize}
        </if>
    </select>
    <!--app查询我的反馈列表-->
    <select id="appListUserFeedbackByUserId" parameterType="java.lang.String" resultType="java.util.Map">
        select * from xry_user_feedback where user_id = #{userId}
    </select>

</mapper>