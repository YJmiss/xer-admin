<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.oservice.admin.modules.sys.dao.XryUserCollectDao">

    <!--app端查询用户收藏列表-->
    <select id="appListUserCollectByUserId" parameterType="java.lang.String" resultType="java.util.Map">
      select xuc.obj_id, xuc.id as collectId,xc.* from xry_user_collect xuc left join xry_course xc on xuc.obj_id = xc.id
        where xuc.obj_type = 1 and xuc.obj_status = 1 and xuc.user_id = #{userId}
    </select>
    <!--根据课程id查询课程报名人数-->
    <select id="countCourseApplicantByCourseId" parameterType="java.lang.Long" resultType="java.lang.Integer">
        select count(*) from xry_user_applicant where obj_id = #{courseId} and obj_type = 0 and obj_status = 0
    </select>
    <!--判断用户是否已经收藏了该课程-->
    <select id="isCollectByUserIdAndObjId" parameterType="java.util.Map" resultType="java.util.Map">
      select * from xry_user_collect where obj_id = #{params.objId} and user_id = #${params.userId} and obj_type = 1 and obj_status = 1
    </select>

</mapper>