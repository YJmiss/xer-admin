<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.oservice.admin.modules.sys.dao.XryCourseCatDao">

    <!-- 查询课程类目树 -->
    <select id="treeCourseCat" resultType="com.oservice.admin.modules.sys.entity.XryCourseCatEntity">
      select * from xry_course_cat where 1=1
      <if test="flag != null and flag == 1">
        and parent_id = 0
      </if>
    </select>
    <!--查询课程信息-->
    <select id="listCourseByCourseCatalogId" resultType="com.oservice.admin.modules.sys.entity.XryCourseEntity">
        select * from xry_course where cid = #{id}
    </select>
    <!--查询类目信息-->
    <select id="isParentCourseCatalogById" resultType="com.oservice.admin.modules.sys.entity.XryCourseCatEntity">
        select * from xry_course_cat where parent_id = #{id}
    </select>
    <!--查询所有的课程类目-->
    <select id="listCourseCat" resultType="java.util.Map">
        select * from xry_course_cat
    </select>
    <!--修改类目状态-->
    <select id="updateCourseCatStatusByCatId" parameterType="java.util.Map">
        update xry_course_cat set status = #{params.status} where id in
        <foreach collection="params.ids" item="id" open="(" separator="," close=")">
            #{id}
        </foreach>   
    </select>
    <!--是父类目，查询出所有子类目-->
    <select id="listCourseCatByParentCatId" parameterType="java.lang.Long" resultType="java.lang.Long">
      select id from xry_course_cat where parent_id = #{courseCatId}
    </select>
    <!--查询用户已经设置的喜好（类目）-->
    <select id="listRecommendCourseCatByUserId" parameterType="java.lang.String" resultType="java.lang.String">
      select cat_id from xry_recommend where user_id = #{userId}
    </select>
    <!--根据类目id查询出类目信息（类目标题）-->
    <select id="getCourseCatById" parameterType="java.lang.Long" resultType="java.util.Map">
      select * from xry_course_cat where id = #{courseCatId}
    </select>

</mapper>